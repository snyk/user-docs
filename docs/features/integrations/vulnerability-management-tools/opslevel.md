# OpsLevel

###

**Introduction to Snyk and OpsLevel Integration**

OpsLevel allows you to define what operational maturity looks like for your organization. Within OpsLevel you can use Rubrics to create definitions for what a mature service looks like and evaluate your services to measure their adherence to your preferred best practices. With OpsLevel Checks you can verify your services meet the standards you care about.

With Snyk and OpsLevel you can create checks for vulnerabilities in your services.

### How it Works

{% hint style="info" %}
**Feature availability** This integration relies on Snyk CLI. [Find out more about the CLI](../../snyk-cli/guides-for-our-cli/cli-reference.md).
{% endhint %}

#### Add a Snyk Integration

1. In the OpsLevel app, click **Integrations** in the left sidebar.
2. Click on the **+ New Integration** button.
3. Click the **Snyk** tile to add the integration.

#### Create a Check

1.  Navigate to the **Rubrics** sub menu under the Service Health menu in OpsLevel

    <img src="../../../.gitbook/assets/image (62) (2) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (7).png" alt="" data-size="original">
2. Create a **Custom Event** check
3. Select the Snyk integration you created from the **Integration** dropdown
4.  Choose one of the Check Templates from the dropdown.

    <img src="../../../.gitbook/assets/image (61) (1) (1) (1) (1) (1) (1) (10) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (6).png" alt="" data-size="original">

    Consult the following list for information about each template:

    1. **No Critical Vulnerabilities**: Any service that has critical vulnerabilities in its package manifest file will fail this check.
    2. **No High Vulnerabilities**: Any service that has high vulnerabilities in its package manifest file will fail this check.
    3. **Less than 3 Medium Vulnerabilities**: Any service with 3 or more medium vulnerabilities in its package manifest will fail this check.
    4. **Less than 5 Low Vulnerabilities**: Any service with 5 or more low vulnerabilities in its package manifest file will fail this check.
    5.  OpsLevel will populate **Service Specifier** field, which is used to determine what service to run the check for, and the **Success Condition** field, which is used to determine if the check should pass or fail. OpsLevel will also provide a sample payload to test the check.

        <img src="../../../.gitbook/assets/image (73) (2).png" alt="" data-size="original">

#### Send payloads to OpsLevel using `snyk`

Run your test command using Snyk CLI and send the JSON output back to OpsLevel using the code below.

```bash
snyk test --prune-repeated-subdependencies --json |
curl -X POST http://app.opslevel.local:5000/integrations/custom_event/xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx \
-H 'content-type: application/json'  --data-binary @-
```

This will send all the vulnerabilities for the service to OpsLevel where the check created in the previous section will be executed.

{% hint style="info" %}
You will need to substitute the endpoint URL from the Snyk Integration you created in place of `xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`.

<img src="../../../.gitbook/assets/image (64) (1) (1).png" alt="" data-size="original">
{% endhint %}
